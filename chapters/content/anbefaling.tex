\section{Anbefalingssystem}\label{anbefaling}
At udvikle og implementere et anbefalingsystem vil opfylde user story 9.
For at lave dette kræves implementering af stories 7 og 10.
Først vil der gennemgås lidt teori om anbefalingssystemer, efterfølgende beskrives vores design og implementering.
Til sidst konkluderes på denne del af vores system.
Anbefalingssystemet har ikke været en kerneområde dette projekt, og derfor foreslår vi også en del forbedringer i konklusionen, som vi ikke har prioriteret at implementere i projektets forløb.

\subsection{Teori}
Inden for anbefalingssystemer findes der mange forskellige retninger.
Hvilken retning et givent projekt benytter sig af ender ud i nogle valg om hvilke typer anbefalinger man ønsker, samt hvilke data man er i besiddelse af, hvorpå man kan basere sine anbefalinger.
I følgende afsnit gennemgås kort nogle forskellige grene og designs inden for anbefalingssystemer.

Nogle af de simpleste anbefalingssystemer, er upersonlige anbefalinger.
Eksempler på dette kan være en simpel sortering af objekter.
Sådanne sorteringer vil ofte være baseret på ting som popularitet, salg, sidevisninger eller lignende.
Den anden overordnede retning inden for anbefaling er personlig anbefaling, dette vil sige at systemet benytter noget data som det har om en bruger, til at anbefale ting, der kunne være særlig interessant for brugeren.
Ved sådanne personlige anbefalinger skal systemet bruge en smagsprofil af dets brugere, for at personliggøre afbefalingerne.
Der findes flere forskellige metoder til at genere personlige anbefalinger, vi vil herunder kort fortælle om to af de mest brugte hovedretninger\citep{RecommenderSystems}.

\subsubsection{Indholdsbaserede anbefalinger}
Indholdsbaserede anbefalinger anbefaler en bruger ting, ud fra brugerens tidligere handlinger i et system.
For hver bruger i et sådan system kan man tilskrive denne en smagsprofil, der beskriver hvor godt en bruger synes om forskellige attributter, baseret på tidligere handlinger.
Sådanne smagsprofiler kan genereres ud fra handlinger, såsom vurderinger, sidevisninger, eller tidligere køb.
Hvert objekt i sådan et system vil så have nogle attributter, og ud fra disse, vil man kunne udregne en brugers smagsprofil.
Når systemet så har en smagsprofil på en bruger, vil det kunne sammenligne et objekts attributter med smagsprofilen, for at se om objektets attributter består af noget brugeren synes om.

Ved brug af denne anbefalingsmetode benytter man ofte 'term frequency inverse document frequency' (tf-idf), som vægter et term, efter hvor sjælden det er i datamængden.
Dette hælper til at skælne mellem termer der optræder ofte, og termer der optræder sjældent.
Hvis et term ikke forekommer så ofte tillægges det derfor en højere betydning end et term med oftere forekomst.

Denne anbefalingsimplementation kræver at man har nogle attributter tilhørende de objekter man gerne vil anbefale brugerne.
Den største fordel ved denne metode  er at man kan lave personlige anbefalinger lige så snart en bruger har generet data, til en smagsprofil.
Ulemperne er man skal have gode attributter til sine data, for denne metode virker. Ligeledes kan denne implementation heller ikke tage højde for betingede regler, eksempelvis hvis man kun kan lide attribut1 i forbindelse med atrribut2 men ikke kan fordrage attribut1 i forbindelse med attribut3.


\subsubsection{Kollaborativ anbefalinger}
Kollabrativ anbefalinger er også bygget op om smagsprofiler.
Denne implementation kræver, modsat den indholdsbaserede, ingen data om de objekter som systemet skal anbefale. I denne metode tager man i stedet brugernes smagsprofiler og holder op mod hinanden for at finde anbefalinger til en bruger.
I \myref{tabel:kollabrativ} ses et eksempel på hvordan denne implementation kan fungere i praksis.

Fordelene ved denne er som nænvte, at den kan bruges på mangelfulde data, hvortil dårlig eller ingen attributter er tilgængelige.
Ligeledes slipper man også for problemet om betingede regler.
Dog er en stor ulempe ved denne metode, det man betegner som ‘cold start’-problemet, hvor man mangler brugeres vurderinger, for at kunne give dem en anbefaling.\citep{RecommenderSystems}.
\input{images/Tables/kollabrativ.tex}

\subsection{Design}
Vi har valgt at implementere to forskellige anbefalinger.
Den første er en simpel, ikke personliggjort anbefaling, som blot er de gennemsnitlige bedømmelser, sorteret faldende.
Ligeledes har vi valgt at implementere en personlig anbefaling, her har vi valgt en indholdsbaseret anbefaling.
Dette valg har vi foretaget af hovedsageligt af to årsager, den første er fordi vi mener at ingredienserne på hver opskrift kan bruges som attributter til at genere smagsprofiler og derfor også anbefalinger udefra.
Den anden årsag, til at valget er faldet på denne løsning, er at vil gerne ville undgå ‘cold-start’ problemet.
Vi har valgt ikke at implementere tf-idf af det inholdsbaserede anbefalingssystem.

Implementationen, som tidligere nævnt, baserer anbefalingerne på opskrifters ingredienser.
Når en bruger har bedømt en opskrift, får hver ingrediens til opskriften tildelt samme bedømmelse.
Hvis en ingrediens er bedømt på mere end en opskrift, bruges gennemsnittet af de samlede bedømmelser for ingrediensen.
Hvis en ingrediens ikke har nogen bedømmelse, bliver denne ingrediens tildelt gennemsnittet af alle brugerens bedømmelser.
Ud fra disse data opretter vi så en smagsprofil for hver bruger, som indeholder en værdi mellem 1-5, for hver ingrediens.

Derefter tager vi blot gennemsnittet af alle værdierne for hver opskrift, for at estimere hvor godt en bruger ville kunne lide en opskrift.
Modellen fungerer som vist på figur \myref{tabel:opskriftanbefaling}.
\input{images/Tables/opskriftanbefaling.tex}

I UI’et har brugeren mulighed for at vælge hvordan opskrifter skal sorteres.
De kan vælge mellem de to beskrevet her, samt at få sorteret dem efter nyeste og ældste.

\subsection{Implementation}


\subsection{Konklusion}
Implementationen af anbefalingerne virker efter hensigten.
Den simple anbefaling, der viser det højst vurderet, er en god funktion for at sorterer opskrifter og derved få vist de højst vurderet først.
Problemerne ved denne er dog at vi ingen nedre grænse har, for hvor mange bedømmelser der skal være, derfor vil en opskrift med én vurdering på 5 ligge højere end en opskrift med 49 vurderinger på 5 og én vurdering på 4.
Dette er en tydelig svaghed, som kunne forbedres uden store ændringer i koden.
Ligeledes ville en forbedring også være at sikre sig, at hvis to eller flere opskrifter har samme gennemsnitlige vurdering, så ville opskriften med flest vurderinger vægtes højest.

Vores anbefalinger baserede på ingredienser, fungerer også til dels efter hensigten, dog kunne algoritmen godt bruge forfinelse, eftersom der ikke er lagde så stor vægt på ingredienser man ikke har bedømt.
Hvis dette skulle gøres kunne der eventuelt vægte ingredienser efter hvor mange gange en bruger har bedømt denne varer.
Ligeledes kunne vi også godt forestille os at en højere vægtning af sjældent forkomne ingredienser ville kunne præcisere anbefalingerne ved at bruge tf-idf.

Disse forbedringer har vi fravalgt at implementere, da de ikke er en del af kerneområde i dette projektforløb.
